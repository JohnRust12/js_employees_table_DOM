{"version":3,"sources":["scripts/main.js"],"names":["table","document","querySelector","tHead","tBody","currSortIndex","selRow","reverseTable","append","rows","reverse","sortTable","sortIndex","sorted","sort","a","b","aText","cells","innerText","bText","localeCompare","replace","Error","addEventListener","e","i","target","cellIndex","selectedRow","row","classList","remove","add","closest","form","createElement","className","innerHTML","pushNotification","title","description","type","errorMessaage","dataset","qa","body","setTimeout","preventDefault","data","FormData","keys","key","inpVal","get","trim","length","rowToAppend","formatedSalary","reset","salaryNumber","Number","toLocaleString","el","cell","value","cellInput","setAttribute","newData","element","blur","focus"],"mappings":"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","file":"main.65eac111.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst table = document.querySelector('table');\nconst tHead = table.querySelector('thead');\nconst tBody = table.querySelector('tbody');\n\nlet currSortIndex = null;\nlet selRow = null;\n\nconst reverseTable = () => {\n  tBody.append(...([...tBody.rows].reverse()));\n};\n\nconst sortTable = (sortIndex) => {\n  const sorted = [...tBody.rows].sort((a, b) => {\n    const aText = a.cells[sortIndex].innerText;\n    const bText = b.cells[sortIndex].innerText;\n\n    switch (sortIndex) {\n      case 0:\n      case 1:\n      case 2:\n        return +aText.localeCompare(bText);\n      case 3:\n        return +aText - +bText;\n      case 4:\n        return +aText.replace(/\\W/g, '')\n          - +bText.replace(/\\W/g, '');\n      default:\n        throw new Error('unexpected cell index');\n    }\n  });\n\n  tBody.append(...sorted);\n};\n\ntHead.addEventListener('click', e => {\n  const i = e.target.cellIndex;\n\n  if (i === currSortIndex) {\n    reverseTable();\n\n    return;\n  }\n\n  sortTable(i);\n  currSortIndex = i;\n});\n\nconst selectedRow = row => {\n  if (row === selRow) {\n    return;\n  }\n\n  // #region\n  if (selRow) {\n    selRow.classList.remove('active');\n  }\n\n  row.classList.add('active');\n  selRow = row;\n  // #endregion\n};\n\ntBody.addEventListener('click', e => {\n  const row = e.target.closest('tr');\n\n  if (!row) {\n    return;\n  }\n\n  selectedRow(row);\n});\n\nconst form = document.createElement('form');\n\nform.className = 'new-employee-form';\n\nform.innerHTML = `\n  <label>\n    Name:\n    <input name=\"name\" type=\"text\" data-qa=\"name\">\n  </label>\n\n  <label>\n    Position:\n    <input name=\"position\" type=\"text\" data-qa=\"position\">\n  </label>\n  <label>\n    Office:\n    <select name=\"office\" data-qa=\"office\" required>\n      <option value=\"Tokyo\">Tokyo</option>\n      <option value=\"Singapore\">Singapore</option>\n      <option value=\"London\">London</option>\n      <option value=\"New York\">New York</option>\n      <option value=\"Edinburgh\">Edinburgh</option>\n      <option value=\"San Francisco\">San Francisco</option>\n    </select>\n  </label>\n  <label>\n    Age:\n    <input name=\"age\" type=\"number\" data-qa=\"age\">\n  </label>\n  <label>\n    Salary:\n    <input name=\"salary\" type=\"number\" data-qa=\"salary\">\n  </label>\n  <button type=\"submit\">Save to table</button>\n`;\n\nconst pushNotification = (title, description, type) => {\n  const errorMessaage = document.createElement('div');\n\n  errorMessaage.innerHTML = `\n    <h2 class=\"title\">${title}</h2>\n    <p>${description}</p>\n  `;\n\n  errorMessaage.classList.add('notification', type);\n  errorMessaage.dataset.qa = 'notification';\n\n  document.body.append(errorMessaage);\n\n  setTimeout(() => errorMessaage.remove(), 3000);\n};\n\ndocument.body.append(form);\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n\n  const data = new FormData(form);\n\n  for (const key of data.keys()) {\n    const inpVal = data.get(key).trim();\n\n    if (!inpVal) {\n      pushNotification(\n        'Data Error',\n        `The ${key} field could not be ampty`,\n        'error'\n      );\n\n      return;\n    }\n\n    switch (key) {\n      case 'name':\n        if (inpVal.length < 4) {\n          pushNotification(\n            'Data Error',\n            `Name should be no less than 4 letters long`,\n            'error'\n          );\n\n          return;\n        }\n\n        break;\n\n      case 'age':\n        if (inpVal < 18 || inpVal > 90) {\n          pushNotification(\n            'Data Error',\n            `Age limit is between 18 and 90`,\n            'error'\n          );\n\n          return;\n        }\n\n        break;\n    }\n  }\n\n  const rowToAppend = document.createElement('tr');\n\n  rowToAppend.innerHTML = `\n    <td>${data.get('name')}</td>\n    <td>${data.get('position')}</td>\n    <td>${data.get('office')}</td>\n    <td>${data.get('age')}</td>\n    <td>${formatedSalary(data.get('salary'))}</td>\n  `;\n\n  tBody.append(rowToAppend);\n  form.reset();\n\n  pushNotification(\n    'Added!',\n    'New employee was added to the very and',\n    'success'\n  );\n});\n\nconst formatedSalary = salaryNumber =>\n  '$' + Number(salaryNumber).toLocaleString('GB-en');\n\ntBody.addEventListener('dblclick', el => {\n  const cell = el.target;\n  const value = el.target.innerText;\n  const cellIndex = cell.cellIndex;\n  const cellInput = document.createElement('input');\n\n  cellInput.className = 'cell-input';\n\n  switch (cellIndex) {\n    case 0:\n    case 1:\n    case 2:\n      cellInput.setAttribute('type', 'text');\n      break;\n    case 3:\n    case 4:\n      cellInput.setAttribute('type', 'number');\n      break;\n    default:\n      throw new Error('Invalid cell index');\n  }\n\n  cell.innerHTML = '';\n  cell.append(cellInput);\n\n  cellInput.addEventListener('blur', () => {\n    let newData = cellInput.value;\n\n    if (cellIndex === 4) {\n      newData = formatedSalary(newData);\n    }\n\n    if (!cellInput.value || cellInput.value.trim() === '') {\n      newData = value;\n    }\n\n    cell.innerHTML = newData;\n\n    cellInput.value = '';\n    cellInput.remove();\n  });\n\n  cellInput.addEventListener('keydown', element => {\n    if (element.key === 'Enter') {\n      cellInput.blur();\n    }\n  });\n\n  cellInput.focus();\n});\n"]}